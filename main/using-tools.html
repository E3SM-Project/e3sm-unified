

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="./">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Using Tools in E3SM-Unified</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css?v=b86133f3" />
      <link rel="stylesheet" type="text/css" href="_static/css/theme.css?v=e59714d7" />

  
      <script src="_static/jquery.js?v=5d32c60e"></script>
      <script src="_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="_static/documentation_options.js?v=a8da1a53"></script>
      <script src="_static/doctools.js?v=9bcbadda"></script>
      <script src="_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Release Workflow" href="releasing/index.html" />
    <link rel="prev" title="Quickstart Guide" href="quickstart.html" />
    <link href="_static/style.css" rel="stylesheet" type="text/css">

</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="index.html" class="icon icon-home">
            E3SM-Unified
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction to E3SM-Unified</a></li>
<li class="toctree-l1"><a class="reference internal" href="quickstart.html">Quickstart Guide</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Using Tools in E3SM-Unified</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#e3sm-diags">📈 E3SM Diags</a></li>
<li class="toctree-l2"><a class="reference internal" href="#moab">📐 MOAB</a></li>
<li class="toctree-l2"><a class="reference internal" href="#mpas-analysis">📊 MPAS-Analysis</a></li>
<li class="toctree-l2"><a class="reference internal" href="#nco">🧪 NCO</a></li>
<li class="toctree-l2"><a class="reference internal" href="#zppy">⚙️ zppy</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#example-usage">Example usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#configuration-highlights">Configuration Highlights</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#zstash">📦 zstash</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#key-features">Key Features</a></li>
<li class="toctree-l3"><a class="reference internal" href="#basic-usage">Basic Usage</a></li>
<li class="toctree-l3"><a class="reference internal" href="#installation">Installation</a></li>
<li class="toctree-l3"><a class="reference internal" href="#documentation-and-tutorials">Documentation and Tutorials</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#more-tools">🧰 More Tools</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="releasing/index.html">Release Workflow</a></li>
<li class="toctree-l1"><a class="reference internal" href="packages.html">Package Catalog</a></li>
<li class="toctree-l1"><a class="reference internal" href="troubleshooting.html">Troubleshooting &amp; FAQs</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">Contributing &amp; Community</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">E3SM-Unified</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Using Tools in E3SM-Unified</li>
      <li class="wy-breadcrumbs-aside">
            <a href="_sources/using-tools.md.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section class="tex2jax_ignore mathjax_ignore" id="using-tools-in-e3sm-unified">
<h1>Using Tools in E3SM-Unified<a class="headerlink" href="#using-tools-in-e3sm-unified" title="Link to this heading"></a></h1>
<p>E3SM-Unified includes a suite of powerful tools for analysis, diagnostics,
file manipulation, and more. This page provides quick summaries and links to
documentation to help you get started with some of the most commonly used
tools.</p>
<hr class="docutils" />
<section id="e3sm-diags">
<h2>📈 E3SM Diags<a class="headerlink" href="#e3sm-diags" title="Link to this heading"></a></h2>
<p>E3SM Diagnostics (E3SM Diags) enables model-vs-observation and model-vs-model
comparisons using a wide array of climatological diagnostics.</p>
<ul>
<li><p><strong>Core Use Cases</strong>:</p>
<ul class="simple">
<li><p>Climatology comparisons (e.g., model vs. obs, model vs. model)</p></li>
<li><p>Time series comparisons</p></li>
<li><p>Diagnostic sets including ENSO, QBO, streamflow, tropical cyclones, and
more</p></li>
</ul>
</li>
<li><p><strong>Quickstart</strong>:</p>
<ol class="arabic">
<li><p>Clone or download an
<a class="reference external" href="https://github.com/E3SM-Project/e3sm_diags/tree/master/examples">example</a>
and modify the parameters file</p></li>
<li><p>Activate the E3SM-Unified environment on an HPC machine (e.g.,
Perlmutter):</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>/global/common/software/e3sm/anaconda_envs/load_latest_e3sm_unified_pm-cpu.sh
</pre></div>
</div>
</li>
<li><p>Run with multiprocessing:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>python<span class="w"> </span>ex4.py<span class="w"> </span>--multiprocessing<span class="w"> </span>--num_workers<span class="o">=</span><span class="m">32</span><span class="w"> </span>-d<span class="w"> </span>diags.cfg
</pre></div>
</div>
</li>
<li><p>View output using the generated HTML viewer</p></li>
</ol>
</li>
<li><p><strong>CMIP Preprocessing</strong> (for time series obs/model comparisons):</p>
<ul class="simple">
<li><p>Rename files to E3SM format: <code class="docutils literal notranslate"><span class="pre">&lt;variable&gt;_&lt;start_yr&gt;01_&lt;end_yr&gt;12.nc</span></code></p></li>
<li><p>Place all relevant files in the same directory</p></li>
</ul>
</li>
<li><p><strong>Visualization Examples</strong>:</p>
<ul class="simple">
<li><p>Latitude-longitude and polar maps</p></li>
<li><p>Taylor diagrams</p></li>
<li><p>Pressure-latitude and pressure-longitude slices</p></li>
<li><p>Time series and zonal mean plots</p></li>
</ul>
</li>
</ul>
<p>🔗 <a class="reference external" href="https://docs.e3sm.org/e3sm_diags/_build/html/main/index.html">Documentation Hub</a>
🔗 <a class="reference external" href="https://docs.e3sm.org/e3sm_diags/_build/html/main/examples.html">Run Examples</a>
🔗 <a class="reference external" href="https://portal.nersc.gov/cfs/e3sm/forsyth/examples/ex1-model_ts-vs-model_ts/viewer/">Example Output Viewer</a></p>
</section>
<hr class="docutils" />
<section id="moab">
<h2>📐 MOAB<a class="headerlink" href="#moab" title="Link to this heading"></a></h2>
<p>MOAB provides mesh and geometry tools for analysis workflows using unstructured
grids.</p>
<p>Used for working with unstructured meshes and remapping — useful in
preprocessing, remapping or analyzing EAM and MPAS grids.</p>
<p>🔗 <a class="reference external" href="https://sigma.mcs.anl.gov/moab-library/">MOAB Documentation</a></p>
</section>
<hr class="docutils" />
<section id="mpas-analysis">
<h2>📊 MPAS-Analysis<a class="headerlink" href="#mpas-analysis" title="Link to this heading"></a></h2>
<p>MPAS-Analysis is used to evaluate MPAS-Ocean and MPAS-Seaice output.</p>
<ul>
<li><p><strong>Quickstart</strong>:</p>
<ul>
<li><p>Copy or create a config file (e.g., <code class="docutils literal notranslate"><span class="pre">myrun.cfg</span></code>)</p></li>
<li><p>Run:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mpas_analysis<span class="w"> </span>myrun.cfg
</pre></div>
</div>
</li>
<li><p>Optional: use <code class="docutils literal notranslate"><span class="pre">--purge</span></code> to remove old results, or <code class="docutils literal notranslate"><span class="pre">--generate</span></code> to run a
subset of tasks</p></li>
</ul>
</li>
<li><p><strong>Parallel runs</strong>: supported via job scripts for common HPC systems</p></li>
<li><p><strong>Custom plots</strong>: generate new plots using precomputed climatology and time
series data</p></li>
</ul>
<p>🔗 <a class="reference external" href="https://mpas-dev.github.io/MPAS-Analysis/develop/users_guide/quick_start.html#running-the-analysis">MPAS-Analysis: Running the Analysis</a>
🔗 <a class="reference external" href="https://github.com/MPAS-Dev/MPAS-Analysis/tree/develop/configs">Example config files</a></p>
</section>
<hr class="docutils" />
<section id="nco">
<h2>🧪 NCO<a class="headerlink" href="#nco" title="Link to this heading"></a></h2>
<p>NCO (NetCDF Operators) provides command-line tools for manipulating NetCDF
files.</p>
<p>Includes tools like <code class="docutils literal notranslate"><span class="pre">ncreamp</span></code>, <code class="docutils literal notranslate"><span class="pre">ncclimo</span></code>, <code class="docutils literal notranslate"><span class="pre">ncks</span></code>, <code class="docutils literal notranslate"><span class="pre">ncra</span></code>, <code class="docutils literal notranslate"><span class="pre">ncrcat</span></code>, and
<code class="docutils literal notranslate"><span class="pre">ncatted</span></code> for computing climatologies and extracting time series as well as
remapping, subsetting, concatenating, and editing NetCDF files.</p>
<p>🔗 <a class="reference external" href="http://nco.sourceforge.net/nco.html">NCO Manual</a></p>
</section>
<hr class="docutils" />
<section id="zppy">
<h2>⚙️ zppy<a class="headerlink" href="#zppy" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/E3SM-Project/zppy"><code class="docutils literal notranslate"><span class="pre">zppy</span></code></a> (pronounced <em>zippee</em>) is E3SM’s
main post-processing toolchain. It automates key analysis steps like generating
time series, climatologies, and diagnostic plots using <strong>NCO</strong>, <strong>E3SM Diags</strong>,
and <strong>MPAS-Analysis</strong> — especially helpful for long or high-resolution
simulations.</p>
<p>Users control zppy through a single <code class="docutils literal notranslate"><span class="pre">.cfg</span></code> configuration file, specifying:</p>
<ul class="simple">
<li><p>Input/output directories</p></li>
<li><p>Model components and time ranges to post-process</p></li>
<li><p>Which analysis tasks to run (e.g., <code class="docutils literal notranslate"><span class="pre">e3sm_diags</span></code>, <code class="docutils literal notranslate"><span class="pre">mpas_analysis</span></code>, <code class="docutils literal notranslate"><span class="pre">ts</span></code>,
<code class="docutils literal notranslate"><span class="pre">climo</span></code>, etc.)</p></li>
</ul>
<p>zppy uses this config to generate and submit batch jobs (via SLURM) with
automatic dependency management.</p>
<section id="example-usage">
<h3>Example usage<a class="headerlink" href="#example-usage" title="Link to this heading"></a></h3>
<p>Copy or create a <code class="docutils literal notranslate"><span class="pre">.cfg</span></code> file (e.g., <code class="docutils literal notranslate"><span class="pre">post.mysimulation.cfg</span></code>) containing task
and data settings.</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>zppy<span class="w"> </span>-c<span class="w"> </span>post.mysimulation.cfg
</pre></div>
</div>
<ul class="simple">
<li><p>Post-processed outputs (NetCDF + plots) go in the <code class="docutils literal notranslate"><span class="pre">output</span></code> and <code class="docutils literal notranslate"><span class="pre">www</span></code>
directories</p></li>
<li><p>Job logs and submission scripts are written under <code class="docutils literal notranslate"><span class="pre">&lt;output&gt;/post/scripts</span></code></p></li>
<li><p>Each zppy task can be debugged by editing and resubmitting its <code class="docutils literal notranslate"><span class="pre">.bash</span></code> script</p></li>
</ul>
</section>
<section id="configuration-highlights">
<h3>Configuration Highlights<a class="headerlink" href="#configuration-highlights" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Supports custom and campaign-specific settings (e.g.,
<code class="docutils literal notranslate"><span class="pre">campaign</span> <span class="pre">=</span> <span class="pre">water_cycle</span></code>)</p></li>
<li><p>Each analysis block is defined using <code class="docutils literal notranslate"><span class="pre">[section]</span></code> and <code class="docutils literal notranslate"><span class="pre">[[subsection]]</span></code> syntax</p></li>
<li><p>Works with native-resolution and RRM simulations</p></li>
</ul>
<p>🔗 <a class="reference external" href="https://docs.e3sm.org/zppy/_build/html/main/tutorial.html">View the zppy tutorial and examples</a></p>
</section>
</section>
<hr class="docutils" />
<section id="zstash">
<h2>📦 zstash<a class="headerlink" href="#zstash" title="Link to this heading"></a></h2>
<p><a class="reference external" href="https://github.com/E3SM-Project/zstash"><code class="docutils literal notranslate"><span class="pre">zstash</span></code></a> is the
<strong>long-term HPSS archiving</strong> solution used by E3SM to store simulation output
in an efficient and reproducible way.</p>
<p>It is written in Python and designed to be lightweight, fast, and reliable —
emphasizing portability and long-term stability over complex features.</p>
<section id="key-features">
<h3>Key Features<a class="headerlink" href="#key-features" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>Archives files into <strong>tarballs</strong> with user-defined max size</p></li>
<li><p>Uses <strong>MD5 checksums</strong> (computed on-the-fly) for both files and tars</p></li>
<li><p>Stores all metadata (paths, sizes, checksums, offsets) in a
<strong>SQLite database</strong></p></li>
<li><p>Allows for <strong>selective extraction</strong> of files from tarballs</p></li>
<li><p>Verifies <strong>file integrity</strong> during extraction</p></li>
</ul>
</section>
<section id="basic-usage">
<h3>Basic Usage<a class="headerlink" href="#basic-usage" title="Link to this heading"></a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># Archive files to HPSS</span>
zstash<span class="w"> </span>create<span class="w"> </span>--hpss<span class="o">=</span>HPSS_PATH<span class="w"> </span>--keep<span class="w"> </span>input_dir

<span class="c1"># Extract files from archive</span>
zstash<span class="w"> </span>extract<span class="w"> </span>--hpss<span class="o">=</span>HPSS_PATH<span class="w"> </span>--files<span class="o">=</span>FILELIST

<span class="c1"># Check archive integrity</span>
zstash<span class="w"> </span>check<span class="w"> </span>--hpss<span class="o">=</span>HPSS_PATH
</pre></div>
</div>
<blockquote>
<div><p>For best performance, run <code class="docutils literal notranslate"><span class="pre">zstash</span></code> on <strong>data transfer nodes</strong> (DTNs) of
supported machines.</p>
</div></blockquote>
</section>
<section id="installation">
<h3>Installation<a class="headerlink" href="#installation" title="Link to this heading"></a></h3>
<p><code class="docutils literal notranslate"><span class="pre">zstash</span></code> is included in the E3SM-Unified environment on supported HPC systems:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="nb">source</span><span class="w"> </span>/path/to/load_latest_e3sm_unified_&lt;machine&gt;.sh
</pre></div>
</div>
<p>You can also install the latest release manually:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>mamba<span class="w"> </span>create<span class="w"> </span>-n<span class="w"> </span>zstash_env<span class="w"> </span>zstash
conda<span class="w"> </span>activate<span class="w"> </span>zstash_env
</pre></div>
</div>
</section>
<section id="documentation-and-tutorials">
<h3>Documentation and Tutorials<a class="headerlink" href="#documentation-and-tutorials" title="Link to this heading"></a></h3>
<ul class="simple">
<li><p>🔗 <a class="reference external" href="https://docs.e3sm.org/zstash/_build/html/main/getting_started.html">Getting started</a></p></li>
<li><p>🔗 <a class="reference external" href="https://docs.e3sm.org/zstash/_build/html/main/getting_started.html#installation-in-a-conda-environment">Install via conda</a></p></li>
<li><p>🔗 <a class="reference external" href="https://docs.e3sm.org/zstash/_build/html/main/best_practices.html">Best practices</a></p></li>
<li><p>🔗 <a class="reference external" href="https://docs.e3sm.org/zstash/_build/html/main/usage.html">zstash command usage</a></p></li>
</ul>
</section>
</section>
<hr class="docutils" />
<section id="more-tools">
<h2>🧰 More Tools<a class="headerlink" href="#more-tools" title="Link to this heading"></a></h2>
<p>Other included tools (e.g., <code class="docutils literal notranslate"><span class="pre">e3sm_to_cmip</span></code>, <code class="docutils literal notranslate"><span class="pre">mpas_tools</span></code>, <code class="docutils literal notranslate"><span class="pre">pyremap</span></code>, <code class="docutils literal notranslate"><span class="pre">xcdat</span></code>)
have documentation hosted on their respective repos or conda-forge feedstocks.</p>
<p>We welcome suggestions for additional summaries and links!</p>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="quickstart.html" class="btn btn-neutral float-left" title="Quickstart Guide" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="releasing/index.html" class="btn btn-neutral float-right" title="Release Workflow" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Energy Exascale Earth System Model Project.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
   

  <!-- Meta tags for JS to use -->
  <meta name="doc-version" content="main">
  <meta name="doc-site-root" content="./">

  <!-- Create version switcher container -->
  <script>
    const sidebar = document.querySelector('.wy-side-nav-search');
    if (sidebar) {
      const versionDiv = document.createElement('div');
      versionDiv.id = 'version-switcher';
      versionDiv.style.marginTop = '1em';
      sidebar.appendChild(versionDiv);
    }
  </script>

  <!-- Load version-switcher.js using the correct relative path -->
  <script src="../shared/version-switcher.js"></script>


</body>
</html>